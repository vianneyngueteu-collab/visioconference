<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion WebRTC P2P - SimplePeer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="style.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-video"></i> Connexion WebRTC P2P avec SimplePeer</h1>
            <p class="description">Établissez une connexion peer-to-peer sécurisée pour le streaming vidéo en temps réel. Commencez en tant qu'initiateur ou receveur de la connexion.</p>
        </header>

        <div class="status" id="connection-status">
            <i class="fas fa-info-circle"></i>
            <span>Prêt à établir une connexion</span>
        </div>

        <div class="card">
            <div class="card-header">
                <i class="fas fa-play-circle"></i>
                <h2>Démarrer une connexion</h2>
            </div>
            <p>Sélectionnez votre rôle dans la connexion :</p>
            <div class="btn-container">
                <button id="start" class="btn">
                    <i class="fas fa-broadcast-tower"></i> Start (Initiator)
                </button>
                <button id="receive" class="btn btn-success">
                    <i class="fas fa-satellite-dish"></i> Receive (Receiver)
                </button>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <i class="fas fa-broadcast-tower"></i>
                <h2>Signalisation locale (copier ceci)</h2>
            </div>
            <textarea id="offer" rows="10" readonly placeholder="Les données de signalisation apparaîtront ici..."></textarea>
            <button class="copy-btn" id="copy-offer">
                <i class="fas fa-copy"></i> Copier
            </button>
        </div>

        <div class="card">
            <div class="card-header">
                <i class="fas fa-satellite"></i>
                <h2>Coller le signal distant ici</h2>
            </div>
            <form id="incoming">
                <textarea rows="10" placeholder="Collez ici l'offre ou la réponse reçue de l'autre pair..."></textarea>
                <div class="action-buttons">
                    <button type="submit" class="btn">
                        <i class="fas fa-paper-plane"></i> Envoyer signal
                    </button>
                    <button type="button" class="btn btn-warning" id="clear-input">
                        <i class="fas fa-trash"></i> Effacer
                    </button>
                </div>
            </form>
        </div>

        <div class="video-container">
            <div class="video-card">
                <div class="video-header">
                    <i class="fas fa-user"></i> Vidéo de l'émetteur (vous-même)
                </div>
                <video id="emitter-video" autoplay muted playsinline></video>
            </div>
            
            <div class="video-card">
                <div class="video-header">
                    <i class="fas fa-users"></i> Vidéo du pair distant
                </div>
                <video id="receiver-video" autoplay playsinline></video>
            </div>
        </div>

        <footer>
            <p>Connexion WebRTC P2P avec SimplePeer - Démo technique</p>
        </footer>
    </div>

    <!-- SimplePeer -->
    <script src="https://unpkg.com/simple-peer@latest/simplepeer.min.js"></script>

    <!-- Script principal -->
    <script src="app.js"></script>
</body>
</html>